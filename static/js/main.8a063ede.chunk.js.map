{"version":3,"sources":["components/DataTable.jsx","components/Filter.jsx","data.ts","pages/App.tsx","reportWebVitals.ts","index.tsx"],"names":["Header","props","titles","length","className","map","key","test","defaultProps","Body","entries","row","slice","field","idx","dangerouslySetInnerHTML","__html","DataTable","Filter","onSubmit","placeholderText","value","filterInput","useRef","event","preventDefault","current","type","placeholder","onChange","target","ref","cachedData","dataHeaders","loadData","a","get","bent","window","location","href","response","formatData","entry","vehicleType","jenis_trayek","jenis_angkutan","replace","routeNumber","no_trayek","routeName","nama_trayek","routeDepart","rute_berangkat","routeReturn","rute_kembali","id","Jenis","No","join","generateRegexStr","rawStr","result","split","chunk","isRegexValid","regexStr","RegExp","e","query","rawData","rgx","highlightRgx","reduce","acc","concat","Object","values","forEach","getData","App","debouncedGetData","debounce","res","setState","handleFilterSubmit","bind","state","filterValue","this","React","Component","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.8a063ede.chunk.js","sourcesContent":["import { FC } from 'react';\n\ntype HeaderProps = {\n  titles: string[],\n}\n\nconst Header: FC<HeaderProps> = (props: HeaderProps) => {\n  const { titles } = props;\n\n  if (titles.length > 0) {\n    return (\n      <thead className=\"text-gray-500 text-left\">\n        <tr>\n          {titles.map(key => {\n            if (!/~/.test(key)) {\n              return (\n                <th\n                  className=\"pb-4\"\n                  key={key}\n                >\n                  {key}\n                </th>\n              );\n            }\n\n            return null;\n          })}\n        </tr>\n      </thead>\n    );\n  }\n\n  return null;\n};\n\nHeader.defaultProps = {\n  titles: [],\n};\n\ntype BodyProps = {\n  entries: string[][],\n}\n\nconst Body: FC<BodyProps> = (props: BodyProps) => {\n  const { entries } = props;\n\n  if (entries) {\n    return (\n      <tbody>\n        {entries.map(row => (\n          <tr key={row[0]}>\n            {row.slice(1).map((field, idx) => (\n              <td\n                key={`${row[0]}${idx}`}\n                className=\"align-top pb-2\"\n                dangerouslySetInnerHTML={{ __html: field }}\n              >\n              </td>\n            ))}\n          </tr>\n        ))}\n      </tbody>\n    );\n  }\n\n  return null;\n}\n\nconst DataTable: FC<TableProps> = (props: HeaderProps & BodyProps) => {\n  const { entries, titles } = props;\n\n  return (\n    <table>\n      <Header titles={titles} />\n      <Body entries={entries} />\n    </table>\n  );\n}\n\nexport { Body, Header };\nexport default DataTable;\n","import { FC, useRef } from 'react';\n\ntype FilterProps = {\n  placeholder: string,\n  value: string,\n}\n\nconst Filter: FC<FilterProps> = (props: FilterProps) => {\n  const { onSubmit, placeholderText, value } = props;\n  const filterInput = useRef(null);\n\n  const handleChange = (event) => {\n    const { value } = event.target;\n\n    onSubmit(value);\n  }\n\n  const handleSubmit = (event) => {\n    event.preventDefault();\n\n    const { value } = filterInput.current;\n\n    onSubmit(value);\n  }\n\n  return (\n    <form\n      className=\"flex flex-row text-lg border-b-2 border-gray-600 pb-2 mb-8\"\n      onSubmit={handleSubmit}\n    >\n      <input\n        type=\"text\"\n        className=\"flex-grow outline-none bg-transparent\"\n        placeholder={placeholderText}\n        onChange={handleChange}\n        value={value}\n        ref={filterInput}\n      />\n      <button type=\"submit\" className=\"font-bold px-2\">\n        &rarr;\n      </button>\n    </form>\n  );\n}\n\nexport default Filter;\n","import bent from 'bent';\n\nlet cachedData = [];\nconst dataHeaders = ['Jenis', 'No', 'Nama Rute', 'Rute Berangkat', 'Rute Kembali'];\n\nasync function loadData(): object[] {\n  const get = bent(window.location.href, 'json');\n  const response = await get('/data.json');\n\n  return response;\n}\n\nfunction formatData(entry: object) {\n  const vehicleType: string =\n    entry.jenis_trayek === '-'\n      ? entry.jenis_angkutan.replace(/K W K/i, 'KWK')\n      : entry.jenis_trayek.replace(/K W K/i, 'KWK');\n  const routeNumber: string = entry.no_trayek;\n  const routeName: string = entry.nama_trayek;\n  const routeDepart: string = entry.rute_berangkat.replace(/ -- /g, '<br/>');\n  const routeReturn: string = entry.rute_kembali.replace(/ -- /g, '<br/>');\n\n  return {\n    '~id': entry.id,\n    Jenis: vehicleType,\n    No: routeNumber,\n    'Nama Rute': routeName,\n    'Rute Berangkat': routeDepart,\n    'Rute Kembali': routeReturn,\n    '~digest': [vehicleType, routeNumber, routeName, routeDepart, routeReturn].join(' -- '),\n  };\n}\n\nfunction generateRegexStr(rawStr: string): string {\n  let result = rawStr.split(' ');\n\n  result = result.map(chunk => {\n    return `(?=.*${chunk})`;\n  });\n\n  return `${result.join('')}.`;\n}\n\nfunction isRegexValid(regexStr: string): boolean {\n  let result = false;\n\n  try {\n    const rgx = new RegExp(regexStr);\n    result = typeof rgx !== 'undefined';\n  } catch (e) {\n    result = false;\n  }\n\n  return result;\n}\n\nasync function getData(query: string): object[] {\n  if (cachedData.length === 0) {\n    const rawData = await loadData();\n    cachedData = rawData.map(formatData);\n  }\n\n  const regexStr = generateRegexStr(query);\n  let result = [];\n\n  if (query !== '' && isRegexValid(regexStr)) {\n    const rgx = new RegExp(regexStr, 'ig');\n    const highlightRgx = new RegExp(query, 'ig');\n\n    result = cachedData.reduce((acc, current) => {\n      if (rgx.test(current['~digest'])) {\n        const row = [].concat(Object.values(current).slice(0, -1));\n        row.forEach((field, idx) => {\n          if (field.length) {\n            row[idx] = field.replace(highlightRgx, '<span class=\"text-blue-500\">$&</span>')\n          }\n        });\n        acc = acc.concat([row]);\n      }\n\n      return acc;\n    }, []);\n  }\n\n  return result;\n}\n\nexport { dataHeaders, formatData, loadData };\nexport default getData;\n","import debounce from 'just-debounce';\nimport React from 'react';\n\nimport DataTable from '../components/DataTable';\nimport Filter from '../components/Filter';\n\nimport getData, { dataHeaders } from '../data';\n\ntype AppProps = {}\n\n\nclass App extends React.Component<AppProps> {\n  constructor(props: AppProps) {\n    super(props);\n\n    this.handleFilterSubmit = this.handleFilterSubmit.bind(this);\n    this.state = {\n      filterValue: '',\n      titles: dataHeaders,\n      entries: [],\n    };\n  }\n\n  debouncedGetData = debounce(async (query) => {\n    const res = await getData(query);\n    this.setState({ entries: res });\n  }, 300);\n\n  handleFilterSubmit(filterValue) {\n    this.setState({ filterValue });\n    this.debouncedGetData(filterValue);\n  }\n\n  render() {\n    const { handleFilterSubmit } = this;\n    const { entries, filterValue, titles } = this.state;\n\n    return (\n      <div className=\"wrap mx-auto my-8 flex flex-col\">\n        <Filter value={filterValue} placeholderText=\"Cari rute\" onSubmit={handleFilterSubmit} />\n        { entries.length > 0 &&\n          <DataTable titles={titles} entries={entries} />\n        }\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './stylesheets/out.css';\nimport App from './pages/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}